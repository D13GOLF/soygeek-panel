<!-- templates/dashboard.html -->
{% extends "layout.html" %}
{% block content %}
<h1>Resumen General</h1>

<div class="dashboard-grid">
    <div class="card">
        <h3>Clientes Totales</h3>
        <p>{{ clientes_count }}</p>
    </div>
    <div class="card">
        <h3>Tareas Pendientes</h3>
        <p>{{ tareas_pendientes }}</p>
    </div>
    <div class="card">
        <h3>Tareas Completadas</h3>
        <p>{{ tareas_completadas }}</p>
    </div>
    <div class="card">
        <h3>Tareas Vencidas</h3>
        <p>{{ tareas_vencidas }}</p>
    </div>
    <div class="card">
        <h3>Hostings por vencer</h3>
        <p>{{ hostings_por_vencer }}</p>
    </div>
    <div class="card">
        <h3>Estado del Bot</h3>
        <p>
            {% if estado_bot == "Activo" %}
                <span class="bot-activo">ðŸŸ¢ Activo</span>
            {% else %}
                <span class="bot-inactivo">ðŸ”´ Inactivo</span>
            {% endif %}
        </p>
    </div>
</div>

<div class="grafico-panel">
  <canvas id="graficoTareas" width="400" height="200"></canvas>
</div>

<!-- ChartJS -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  const ctx = document.getElementById('graficoTareas').getContext('2d');
  const graficoTareas = new Chart(ctx, {
    type: 'doughnut',
    data: {
      labels: ['Pendientes', 'Completadas'],
      datasets: [{
        label: 'Estado de Tareas',
        data: [{{ tareas_pendientes }}, {{ tareas_completadas }}],
        backgroundColor: ['#f59e0b', '#10b981'],
        borderWidth: 1
      }]
    },
    options: {
      plugins: {
        legend: {
          labels: {
            color: '#fff',
            font: { size: 14 }
          }
        }
      }
    }
  });
</script>
{% endblock %}
